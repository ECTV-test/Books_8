<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Book Reader Prototype</title>

  <link rel="stylesheet" href="css/styles.css">
</head>

<body data-theme="light">
  <div id="app"></div>

  <!-- Translation popover -->
  <div id="popover" class="popover" role="dialog" aria-hidden="true">
    <div class="popRow">
      <div class="popWord" id="popWord">word</div>
      <div class="popMiniBtns">
        <button class="miniBtn" id="popBookmark" title="Bookmark">üîñ</button>
        <button class="miniBtn" id="popSpeak" title="Speak">üîä</button>
      </div>
    </div>
    <div class="popTrans" id="popTrans">translation</div>
    <div class="popActions">
      <button class="popPlay" id="popPlayFromHere" title="Play from here">Play from here</button>
    </div>
  </div>

  <!-- Sheet backdrop -->
  <div id="sheetBackdrop" class="sheetBackdrop" aria-hidden="true"></div>

  <!-- Settings (User) -->
  <div id="settings" class="sheet" aria-hidden="true">
    <div class="sheetHandle" aria-hidden="true"></div>
    <div class="setHead">
      <div class="setTitle">–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</div>
      <button class="miniBtn" id="setClose">‚úï</button>
    </div>

    <div class="sheetTabs" role="tablist" aria-label="Settings tabs">
      <button class="sheetTab active" id="setTabRead" role="tab" aria-selected="true">–¢–µ–∫—Å—Ç</button>
      <button class="sheetTab" id="setTabListen" role="tab" aria-selected="false">–ê—É–¥–∏–æ</button>
    </div>

    <div id="setPaneRead" class="sheetPane" role="tabpanel">
      <div class="row">
        <div>
          <div><b>–ú–æ–≤–∞ –ø–µ—Ä–µ–∫–ª–∞–¥—É</b></div>
          <small>LibreTranslate target</small>
        </div>
        <select id="targetLang"></select>
      </div>

      <div class="row">
        <div>
          <div><b>–†–æ–∑–º—ñ—Ä —Ç–µ–∫—Å—Ç—É</b></div>
          <small>A‚àí / A+</small>
        </div>
        <div class="seg">
          <button id="fontMinus">A‚àí</button>
          <button id="fontPlus">A+</button>
        </div>
      </div>

      <div class="row">
        <div>
          <div><b>–ö–æ–ª—ñ—Ä –ø—ñ–¥—Å–≤—ñ—Ç–∫–∏</b></div>
          <small>Default / Yellow</small>
        </div>
        <div class="seg">
          <button id="hlDefault" class="active">Default</button>
          <button id="hlYellow">Yellow</button>
        </div>
      </div>

      <div class="row" id="rowTapTranslate">
        <div>
          <div><b>–ü–µ—Ä–µ–∫–ª–∞–¥</b></div>
          <small>–ø–æ –∫–ª—ñ–∫—É / —Ç–∞–ø—É</small>
        </div>
        <div class="toggle on" id="tTranslation"><div class="knob"></div></div>
      </div>

      <div class="row" id="rowLineTranslate" style="display:none">
        <div>
          <div><b>–ü–µ—Ä–µ–∫–ª–∞–¥ —Ä—è–¥–∫–æ–º</b></div>
          <small>–ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –ø—ñ–¥ —Ç–µ–∫—Å—Ç–æ–º</small>
        </div>
        <div class="toggle on" id="tLineTranslation"><div class="knob"></div></div>
      </div>

      <div class="row">
        <div>
          <div><b>–¢–µ–º–∞</b></div>
          <small>–Ω—ñ—á–Ω–∏–π —Ä–µ–∂–∏–º</small>
        </div>
        <div class="toggle" id="tNight"><div class="knob"></div></div>
      </div>

      <div class="row">
        <div>
          <div><b>–ü—ñ–¥—Å–≤—ñ—Ç–∫–∞</b></div>
          <small>–∞–∫—Ç–∏–≤–Ω–∏–π —Ä—è–¥–æ–∫</small>
        </div>
        <div class="toggle on" id="tHighlight"><div class="knob"></div></div>
      </div>

      <div class="row">
        <div>
          <div><b>–ü–æ–º—ñ–Ω—è—Ç–∏ –º–æ–≤–∏</b></div>
          <small>–ª–∏—à–µ —Ä–µ–∂–∏–º ‚Äú–ß–∏—Ç–∞—Ç–∏‚Äù</small>
        </div>
        <div class="toggle" id="tSwap"><div class="knob"></div></div>
      </div>
    </div>

    <div id="setPaneListen" class="sheetPane" role="tabpanel" style="display:none">
      <div class="row">
        <div>
          <div><b>–°—Ç–∞—Ç—å –≥–æ–ª–æ—Å—É</b></div>
          <small>—á–æ–ª–æ–≤—ñ—á–∏–π / –∂—ñ–Ω–æ—á–∏–π</small>
        </div>
        <div class="seg">
          <button id="uMale">–ß–æ–ª–æ–≤—ñ—á–∏–π</button>
          <button id="uFemale">–ñ—ñ–Ω–æ—á–∏–π</button>
        </div>
      </div>

      <div class="row">
        <div>
          <div><b>–®–≤–∏–¥–∫—ñ—Å—Ç—å —á–∏—Ç–∞–Ω–Ω—è</b></div>
          <small id="speedLabel">1.0√ó</small>
        </div>
        <div class="seg">
          <button id="uSpeedSlow">–ü–æ–≤—ñ–ª—å–Ω–æ</button>
          <button id="uSpeedNormal">–ù–æ—Ä–º–∞–ª—å–Ω–æ</button>
          <button id="uSpeedFast">–®–≤–∏–¥–∫–æ</button>
        </div>
      </div>

      <!-- keep slider for fine-tuning (hidden in UI) -->
      <input id="speed" class="range" type="range" min="0.3" max="2.0" step="0.05" value="1.0" style="display:none">

      <div class="hint" style="padding-top:6px">
        –ù–æ—Ä–º–∞–ª—å–Ω–∞ —à–≤–∏–¥–∫—ñ—Å—Ç—å ‚Äî —Ü–µ –ø–æ—Ç–æ—á–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è (100).
      </div>
    </div>
  </div>


  <!-- Dev settings (–ê–¥–º—ñ–Ω) -->
  <div id="devPanel" class="sheet" aria-hidden="true">
    <div class="sheetHandle" aria-hidden="true"></div>
    <div class="setHead">
      <div class="setTitle">Dev / –ê–¥–º—ñ–Ω</div>
      <button class="miniBtn" id="devClose">‚úï</button>
    </div>

    <div class="row">
      <div>
        <div><b>–ü—Ä–æ–≤–∞–π–¥–µ—Ä –ø–µ—Ä–µ–∫–ª–∞–¥—É</b></div>
        <small>–¥–ª—è –ø–µ—Ä–µ–∫–ª–∞–¥—É —Ä—è–¥–∫—ñ–≤</small>
      </div>
      <div class="seg">
        <button id="provLibre">Libre</button>
        <button id="provOpenAI">OpenAI</button>
      </div>
    </div>

    <div class="row">
      <div>
        <div><b>–°—Ç–∞—Ç—å –≥–æ–ª–æ—Å—É</b></div>
        <small>—á–æ–ª–æ–≤—ñ—á–∏–π / –∂—ñ–Ω–æ—á–∏–π</small>
      </div>
      <div class="seg">
        <button id="vMale">–ß–æ–ª–æ–≤—ñ—á–∏–π</button>
        <button id="vFemale">–ñ—ñ–Ω–æ—á–∏–π</button>
      </div>
    </div>

    <div class="row">
      <div>
        <div><b>–ì–æ–ª–æ—Å</b></div>
        <small>–≤–±—É–¥–æ–≤–∞–Ω—ñ OpenAI</small>
      </div>
      <select id="ttsVoiceSelect"></select>
    </div>

    <div class="row" style="align-items:flex-start">
      <div style="min-width:140px">
        <div><b>–ü—Ä–æ–º–ø—Ç –≥–æ–ª–æ—Å—É</b></div>
        <small>—ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó</small>
      </div>
      <textarea id="ttsInstructions" style="width:100%;min-height:86px;border:1px solid var(--line);border-radius:12px;padding:10px;background:var(--card);color:var(--text);font-weight:700;resize:vertical"></textarea>
    </div>

    <div class="row">
      <div>
        <div><b>–ë–µ–∑ –∫–µ—à—É</b></div>
        <small>—ñ–≥–Ω–æ—Ä—É–≤–∞—Ç–∏ –∫–µ—à Worker</small>
      </div>
      <div class="toggle" id="tNoCache"><div class="knob"></div></div>
    </div>

    <div class="ctaRow" style="margin-top:6px">
      <button class="btn btnGhost" id="btnClearTts">üßπ –û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à –æ–∑–≤—É—á–µ–Ω–Ω—è</button>
      <button class="btn btnGhost" id="btnClearTr">üßπ –û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à –ø–µ—Ä–µ–∫–ª–∞–¥—É</button>
    </div>

    <div class="hint" style="padding-top:10px">
      –ü–µ—Ä–µ–∫–ª–∞–¥: <b>LibreTranslate</b> (–ø—É–±–ª—ñ—á–Ω–∏–π —Å–µ—Ä–≤—ñ—Å). –Ø–∫—â–æ –±–∞—á–∏—à <b>429</b> ‚Äî —Ü–µ –ª—ñ–º—ñ—Ç. –ö–æ–¥ —Å—Ç–∞–≤–∏—Ç—å –ø–∞—É–∑—É —ñ –ø—Ä–æ—Å–∏—Ç—å –∑–∞—á–µ–∫–∞—Ç–∏.
      <br/><br/>
      –î–ª—è –±–µ–∑–ø–µ–∫–∏ –∫–ª—é—á OpenAI –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —É Worker (secret). GitHub Pages –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è —Å—Ç–∞—Ç–∏—á–Ω–∏–º.
    </div>
  </div>

  

  <div id="chaptersSheet" class="sheet" aria-hidden="true">
    <div class="sheetHandle" aria-hidden="true"></div>
    <div style="display:flex;align-items:center;justify-content:space-between;gap:10px;padding:12px 14px 6px;">
      <div style="font-weight:900;letter-spacing:.2px">Chapters</div>
      <button class="btn" id="chaptersClose" style="padding:8px 12px">Close</button>
    </div>
    <div id="chaptersList" style="padding:6px 12px 18px;display:flex;flex-direction:column;gap:8px;"></div>
  </div>
<!-- Bottom player -->
  <div id="player" class="playerBar" style="display:none">
    <div class="playerInner">
      <div>
        <div class="progTop">
          <div class="progTitle" id="pTitle">Reader</div>
          <div class="progMeta"><span id="pPct">0%</span></div>
        </div>
        <div class="bar"><div id="pFill"></div></div>
      </div>
      <div class="controls">
        <button class="iconBtn" id="btnChapters" title="Chapters">‚â°</button>
        <button class="iconBtn" id="btnBack" title="Back">‚Üê</button>
        <button class="iconBtn" id="btnStart" title="To start">‚ü≤</button>
        <button class="playBtn" id="btnPlay" title="Play/Pause">‚ñ∂</button>

        <div class="modeSwitch" id="modeSwitch">
          <button class="modeBtn" id="modeListen" title="Listen" aria-label="Listen">
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M12 3a7 7 0 0 0-7 7v4a4 4 0 0 0 4 4h1V8H9a5 5 0 0 1 10 0h-1v10h1a4 4 0 0 0 4-4v-4a7 7 0 0 0-7-7z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
            </svg>
          </button>
          <button class="modeBtn" id="modeRead" title="Read" aria-label="Read">
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M7 4h10a2 2 0 0 1 2 2v13H7a2 2 0 0 0-2 2V6a2 2 0 0 1 2-2z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
              <path d="M7 4v15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>

      </div>
    </div>
  </div>

<script src="js/core.js" defer></script>
<script src="js/app.js" defer></script>
</body>
</html>
